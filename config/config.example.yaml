# ContentForge AI v2.2 配置文件
# 复制此文件为 config.yaml 并根据需要修改

# ==================== LLM配置 ====================
llm:
  # 提供商: zhipuai, openai, anthropic
  provider: "zhipuai"

  # ZhipuAI配置
  zhipuai:
    api_key: "${ZHIPUAI_API_KEY}"  # 从环境变量读取
    base_url: "https://open.bigmodel.cn/api/coding/paas/v4/"  # 编码专用端点（最强编程能力）
    # 通用端点: https://open.bigmodel.cn/api/paas/v4/
    model: "glm-4.7"  # 最新旗舰模型（2025年12月发布）
    # 其他可选模型: glm-4-flash（便宜快速）, glm-4-plus（上一代旗舰）
    temperature: 0.7
    max_tokens: 8000  # 支持长文本生成
    timeout: 300  # 5分钟超时

    # Thinking 深度思考模式（GLM-4.7 专属功能）
    thinking:
      enabled: false  # 暂时禁用，参数兼容性问题
      type: "auto"  # enabled=强制启用, auto=自动决定, disabled=关闭

  # OpenAI配置（备用）
  openai:
    api_key: "${OPENAI_API_KEY}"
    base_url: "https://api.openai.com/v1"
    model: "gpt-4o"
    temperature: 0.7
    max_tokens: 2000

# ==================== Agent配置 ====================
agents:
  # AI热点分析Agent
  ai_trend_analyzer:
    enabled: true
    mock_mode: false  # true=模拟数据, false=真实API（多数据源聚合）

    # 数据源配置（全部免费）
    sources:
      - "hackernews"     # Hacker News API（官方Firebase API，完全免费）
      - "arxiv"          # arXiv论文API（官方API，完全免费）
      - "github"         # GitHub Trending（第三方API，免费）
      - "reddit"         # Reddit API（官方API，免费但需要注册）
      - "huggingface"    # Hugging Face Trending（官方API，完全免费）
      - "stackoverflow"  # Stack Overflow API（官方API，完全免费）
      - "kaggle"         # Kaggle竞赛和AI应用案例（通过GitHub搜索，免费）
      - "newsapi"        # NewsAPI科技新闻（官方API，免费但需要API密钥）
      - "devto"          # Dev.to开发者博客（官方API，完全免费）
      - "pypi"           # PyPI热门包统计（官方API，完全免费）
      - "github_topics"  # GitHub Topics行业应用（官方API，完全免费）

    # Reddit API配置（可选）
    reddit:
      client_id: "${REDDIT_CLIENT_ID}"  # 从环境变量读取
      client_secret: "${REDDIT_CLIENT_SECRET}"
      user_agent: "AI_Trend_Analyzer/1.0"

    # 缓存配置
    cache_ttl: 3600  # 缓存时间1小时
    min_trends: 5    # 最少热点数量
    max_trends: 5    # 最多热点数量（固定输出5个）

  # 热点汇总Agent
  trends_digest:
    enabled: true
    style: "magazine"  # professional, casual, magazine（杂志风格）
    include_analysis: true  # 是否包含汇总分析
    max_topics: 5  # 最多汇总多少个热点
    temperature: 0.6
    output_dir: "data/digest"  # 简报保存目录

  # 内容研究Agent（v2.2新增）
  research_agent:
    enabled: true
    max_docs_per_topic: 3
    search_sources:
      - "google"
      - "github"
      - "medium"
      - "devto"
    timeout: 30
    cache_ttl: 3600

  # 长文本生成Agent（v2.2优化：分阶段生成）
  longform_generator:
    enabled: true
    article_length: "long"  # short, medium, long - long生成9000-13000字
    technical_depth: "advanced"  # beginner, intermediate, advanced
    max_tokens: 8000  # 支持长文本
    temperature: 0.7

  # 代码审查Agent（v2.2新增）
  code_review_agent:
    enabled: true
    use_skill: false  # 是否使用code-review skill
    auto_fix: false
    min_rating: 7.0

  # 事实核查Agent（v2.2新增）
  fact_check_agent:
    enabled: true
    verify_claims: true
    check_dates: true
    cross_reference: true
    min_confidence: 0.7

  # 小红书笔记精炼Agent
  xiaohongshu_refiner:
    enabled: true
    style: "professional"  # professional, casual, humorous
    content_density: "dense"  # light, medium, dense
    max_tokens: 3000
    temperature: 0.8

  # Twitter帖子生成Agent
  twitter_generator:
    enabled: true
    style: "engaging"  # engaging, professional, casual
    thread_mode: true  # true=生成thread，false=单条推文
    max_tweets: 8  # thread最多几条推文（v2.2更新为5-8条）
    max_tokens: 2500
    temperature: 0.9

  # 标题优化Agent
  title_optimizer:
    enabled: true
    num_titles: 10  # 生成标题数量
    clickbait_level: 0.3  # 标题党程度 0-1
    use_emojis: true  # 使用emoji

  # 图像建议Agent
  image_advisor:
    enabled: true
    num_suggestions: 3  # 配图建议数量
    generate_sd_prompts: true  # 生成Stable Diffusion提示词

  # 图片生成Agent
  image_generator:
    enabled: true
    enable_generation: false  # 仅生成优化提示词（不实际生成图片）
    provider: "gemini"  # gemini, openai, stability
    model: "gemini-2.0-flash-exp"
    image_size: "1024x1024"
    num_images: 1

  # 质量评估Agent
  quality_evaluator:
    enabled: true
    min_score: 7.0  # 最低质量分数
    auto_improve: true  # 自动改进低分内容

  # 发布Agent
  publisher:
    enabled: true
    auto_publish: false  # 是否自动发布（false=不发布）
    mcp_server_url: "http://localhost:3000"

# ==================== 工作流配置 ====================
workflow:
  # 执行模式: sequential, parallel, custom
  mode: "sequential"

  # 是否启用所有Agent
  run_all_agents: true

  # 保存中间输出
  save_intermediate_outputs: true

  # 输出目录
  output_dir: "data/outputs"

  # 输出格式: json, markdown, html
  output_formats:
    - "json"
    - "markdown"

# ==================== 提示词模板配置 ====================
prompts:
  # 提示词模板文件路径
  template_file: "config/prompts.yaml"

  # 自定义系统提示词（可选，覆盖prompts.yaml）
  custom_system_prompts:
    ai_trend_analyzer: null
    trends_digest: null
    research_agent: null
    longform_generator: null
    code_review_agent: null
    fact_check_agent: null
    xiaohongshu_refiner: null
    twitter_generator: null
    title_optimizer: null
    image_advisor: null
    image_generator: null
    quality_evaluator: null

# ==================== 日志配置 ====================
logging:
  # 日志级别: DEBUG, INFO, WARNING, ERROR
  level: "INFO"

  # 日志格式
  format: "<green>{time:YYYY-MM-DD HH:mm:ss}</green> | <level>{level: <8}</level> | <cyan>{name}</cyan>:<cyan>{function}</cyan> - <level>{message}</level>"

  # 日志文件
  file:
    enabled: true
    path: "logs/app.log"
    rotation: "100 MB"
    retention: "30 days"

  # 控制台输出
  console:
    enabled: true

# ==================== 缓存配置 ====================
cache:
  # 是否启用缓存
  enabled: true

  # 缓存类型: memory, redis
  type: "memory"

  # Redis配置（当type=redis时使用）
  redis:
    host: "localhost"
    port: 6379
    db: 0
    password: null
    ttl: 86400

# ==================== 数据存储配置 ====================
storage:
  # 热点数据存储
  trends:
    dir: "data/trends"
    format: "json"

  # 生成内容存储（按日期分层）
  outputs:
    dir: "data"  # 主目录，实际存储在 data/YYYYMMDD/
    format: "json"
    naming_pattern: "{date}_{topic}_{timestamp}.json"

# ==================== 小红书平台配置 ====================
xiaohongshu:
  # 是否使用真实API
  use_real_api: false

  # MCP配置（未来集成）
  mcp:
    enabled: false
    server_url: "http://localhost:3000"

  # 热门分类
  categories:
    - "AI工具"
    - "编程开发"
    - "效率提升"
    - "职场成长"
    - "汽车科技"

# ==================== Twitter平台配置 ====================
twitter:
  # 是否使用真实API
  use_real_api: false

  # MCP配置（未来集成）
  mcp:
    enabled: false
    server_url: "http://localhost:3000"

# ==================== 质量控制 ====================
quality_control:
  # 内容过滤关键词
  filter_keywords:
    - "违法"
    - "诈骗"
    - "赌博"

  # 最小内容长度
  min_content_length: 200

  # 最大内容长度
  max_content_length: 15000  # v2.2增加以支持长文章

  # 是否进行敏感词检测
  sensitivity_check: true

# ==================== 成本控制 ====================
cost_control:
  # 每日最大token数
  daily_token_limit: 200000  # v2.2增加以支持深度研究

  # 单次请求最大token数
  max_tokens_per_request: 8000

  # 启用成本追踪
  track_costs: true

# ==================== 开发模式 ====================
development:
  # 开发模式
  debug: false

  # 模拟LLM响应（测试用）
  mock_llm: false

  # 保存所有中间状态
  save_all_states: false

  # 并行Agent执行
  parallel_execution: false
